<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Edit testform</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>
  <h1>Edit test message</h1>
  <p>Current message:</p>
  <p id="current">Loading…</p>

  <label>
    New message:
    <input id="newMsg" type="text" style="width:280px">
  </label>
  <button id="saveBtn">Save (client only)</button>

  <p id="note" style="color:#666;font-size:13px;margin-top:1rem;">
    On Vercel static we can read <code>testform.json</code> but we can’t write it.
    This shows the flow; local Node would persist.
  </p>

  <script>
    let original = '';
    fetch('testform.json?ts=' + Date.now())
      .then(r => r.json())
      .then(data => {
        original = data.message || '';
        document.getElementById('current').textContent = original;
        document.getElementById('newMsg').value = original;
      })
      .catch(() => {
        document.getElementById('current').textContent = '(could not load JSON)';
      });

    document.getElementById('saveBtn').addEventListener('click', () => {
      const v = document.getElementById('newMsg').value.trim();
      document.getElementById('current').textContent = v || '(empty)';
      alert('Updated in browser. To persist on Vercel, update testform.json in Git and redeploy.');
    });
  </script>
</body>
</html>